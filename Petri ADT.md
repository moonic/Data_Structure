## Petri and ADT
> 用于描述和分析系统中的控制流和信息流，尤其是那些有异步和并发活动的系统。
   可达性图的信息代数方法分析所描述的系统行为,也可以抽象化建立数据模型 解决ADT的异步调用
   不支持活动并发的问题

* 可用来做什么
	* 通信协议的验证
	* 通讯网络性能评价及多媒体应用
	* 软件工程 工程建模
	* 知识处理 AI知识表达建模
	* FMS的建模、分析和控制
	* 系统可靠性分析
	
* Type
	* 形式定义
		* 规定了Petri网的结构、组成、节点间的相互关系和 动态行为。
			* 优点：严密，精确，抽象，概括
			* 缺点：不形象，不直观，不易于理解
			
	* 图表表示
		* 刻画了系统模型的结构并描述其动态行为
			* 形象直观
			* 与特定建模实例对应

* N=<S，T，F>
       S={s1，s2，…，sm}为库所的集合
       T={t1，t2，…，tn}为变迁的集合
       F =（S×T）∪（T×S）为输入函数和输出函数集，流关系

* 三元组N=（S，T；F）构成网的充分必要条件：

1.  S∩T=ф             规定了库所和变迁是两类不同的元素；
2.  S∪T≠ф            表示网中至少有一个元素；
3.  F=（S×T）∪(T×S)  建立了从库所到变迁、从变迁到库所的单方向联系，并且规定同类元素之间不能直接联系；
4.  dom（F）∪cod（F）=S∪T


## Petri 网描述系统的最基本概念是库所和变迁
> 库所表示系统的状态，变迁表示资源的消耗、使用及使系统
  状态产生的变化。
	
>变迁发生，前置条件必须满足；发生后，某些前置条件不再满足，而某些后置条件则得到满足。


## Petri网关系和性能分析

* 顺序关系（sequential relation）
	* 顺序关系是最基本的事件关系。下图所示的Petri网模型中，
  * e1和e2所代表的事件之间具有顺序关系，即只有e1发生之后，
  * e2在其后续状态才有发生权.


* 并发关系
* 冲突关系

* Petri网的结构
  * 用四元组表示：位置的集合P，变迁的集合T，输入函数I，输出函数O。C = ( P, T, I, O)。下面是一个例子：
  * C = ( P, T, I, O)
  * P = {p1, p2, p3, p4, p5}
  * T = {t1, t2, t3, t4 }
  * I(t1) = {p1}    O(t1) = {p2, p3, p5}
  * I(t2) = {p2, p3, p5}   O(t2) = {p5} 
  * I(t3) = {p3}    O(t3) = {p4}
  * I(t4) = {p4}    O(t4) = {p2, p3}

* 上面是petri网的形式化描述，通常使用简明直观的petri net graph来阐明petri网的许多概念。

 

* Marked Petri net:

  * 一个petri网的标识可以用一个向量表示μ= (μ1, μ2, …μn)。μi代表pi的token数目。
  * 一个标识的petri网叫做marked Petri net，M = ( P, T, I, O, μ)。
  * 任何时候，在任何位置( place )有不多于一个的标识的Petri网，叫做安全网( safe net )。
  * 推广之，在任何位置同时不多于k个标识的Petri网，叫做k-bounded net。如果不知道k的值，简单地叫做bounded net。“有界”代表着petri网在物理上的可实现。
  * 如果Petri网中token的总数保持不变，petri网是保守( conservative )的。它隐含着，可触发的变迁( transition )输入的数目等于它输出的数目。

* Petri网的执行和可达性问题：
  * 一个变迁的每个输入都至少有一个token，则这个transition被enabled。变迁发生时，会从它的每个输入移去一个token，在它的每个输出放置一个token。
  * 一个petri网的状态是它的所有标识的集合（向量μ）。当一个变迁发生时引起的状态变化由一个局部函数δ来定义，叫做下一状态函数。
  * 从一个标识μ可以同时发生一组变迁。如果从μ同时发生一些变迁可以得到μ’，称μ’是立即可达( immediately reachable )的。
	* 可达集合( reachability set )R(M)被定义为M = (P, T, I, O, μ)从μ出发可以得到的所有状态的集合。
  * 给定一个标识的petri网，标识记作u。给定一个标识u’。是否可以从u得到u’是petri网的可达性问题。
		* 可以看作集合可达性问题的一个特例，很多问题都可以归约到可达性问题。
  * 如果没有一个变迁激活序列可以触发一个变迁，我们称这个变迁是死的( dead )；反之，变迁是活的( live )。
		* 为了研究操作系统的死锁问题，在Perti网中定义了变迁的deadness和liveness。

 

用Petri网建模的例子
Petri网适合对存在并发、并行的事件的离散事件系统进行建模。一般用位置( place )表示条件，用变迁表示事件。看下面的图，是一个简单计算机系统的例子：
